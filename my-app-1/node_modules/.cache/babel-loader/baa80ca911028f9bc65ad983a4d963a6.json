{"ast":null,"code":"require('dotenv').config();\n\nconst axios = require('axios');\n\nconsole.log(process.env.REACT_APP_API_KEY);\nconst client = axios.create({\n  baseURL: \"http://\".concat(process.env.URL_F1_API),\n  headers: {\n    'Authorization': \"Bearer \".concat(process.env.API_KEY)\n  },\n  timeout: 20000\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  require('axios-debug-log').addLogger(client);\n}\n\nclient.interceptors.request.use(config => {\n  config.metadata = {\n    startTime: new Date()\n  };\n  return config;\n}, error => {\n  return Promise.reject(error);\n}); // Intercept all responses\n\nclient.interceptors.response.use(response => {\n  console.log(response);\n  response.error = false;\n  return response;\n}, error => {\n  if (error.code) {\n    if (error.code === 'ECONNABORTED') {\n      error.status = 504;\n      console.log(error);\n    }\n  } else {\n    console.log(error); // error.status = error.response.status\n  }\n\n  if (error.status === 500) {\n    console.log(error.response);\n    error.data = error.response.data;\n  } else if (error.status === 504) {\n    console.log(error);\n  } else {//error.data = error.response.data\n  }\n\n  error.error = true;\n  return error;\n});\nmodule.exports = {\n  client,\n  axios\n};","map":{"version":3,"sources":["/home/rodrigo.silva/htdocs/curso-react/my-app-1/src/http/client/F1_index.js"],"names":["require","config","axios","console","log","process","env","REACT_APP_API_KEY","client","create","baseURL","URL_F1_API","headers","API_KEY","timeout","NODE_ENV","addLogger","interceptors","request","use","metadata","startTime","Date","error","Promise","reject","response","code","status","data","module","exports"],"mappings":"AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,MAAMC,KAAK,GAAGF,OAAO,CAAC,OAAD,CAArB;;AAEAG,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAxB;AACA,MAAMC,MAAM,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,mBAAYL,OAAO,CAACC,GAAR,CAAYK,UAAxB,CADiB;AAExBC,EAAAA,OAAO,EAAE;AACL,sCAA2BP,OAAO,CAACC,GAAR,CAAYO,OAAvC;AADK,GAFe;AAKxBC,EAAAA,OAAO,EAAE;AALe,CAAb,CAAf;;AAQA,IAAIT,OAAO,CAACC,GAAR,CAAYS,QAAZ,KAAyB,YAA7B,EAA2C;AACvCf,EAAAA,OAAO,CAAC,iBAAD,CAAP,CAA2BgB,SAA3B,CAAqCR,MAArC;AACH;;AAEDA,MAAM,CAACS,YAAP,CAAoBC,OAApB,CAA4BC,GAA5B,CAAiClB,MAAD,IAAY;AACxCA,EAAAA,MAAM,CAACmB,QAAP,GAAkB;AAAEC,IAAAA,SAAS,EAAE,IAAIC,IAAJ;AAAb,GAAlB;AACA,SAAOrB,MAAP;AACH,CAHD,EAGIsB,KAAD,IAAW;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CALD,E,CAOA;;AACAf,MAAM,CAACS,YAAP,CAAoBS,QAApB,CAA6BP,GAA7B,CACKO,QAAD,IAAc;AACVvB,EAAAA,OAAO,CAACC,GAAR,CAAYsB,QAAZ;AACAA,EAAAA,QAAQ,CAACH,KAAT,GAAiB,KAAjB;AACA,SAAOG,QAAP;AACH,CALL,EAMKH,KAAD,IAAW;AACP,MAAGA,KAAK,CAACI,IAAT,EAAc;AACX,QAAGJ,KAAK,CAACI,IAAN,KAAe,cAAlB,EAAiC;AAChCJ,MAAAA,KAAK,CAACK,MAAN,GAAe,GAAf;AACAzB,MAAAA,OAAO,CAACC,GAAR,CAAYmB,KAAZ;AACA;AACH,GALD,MAKK;AACDpB,IAAAA,OAAO,CAACC,GAAR,CAAYmB,KAAZ,EADC,CAED;AACH;;AAED,MAAIA,KAAK,CAACK,MAAN,KAAiB,GAArB,EAA0B;AACtBzB,IAAAA,OAAO,CAACC,GAAR,CAAYmB,KAAK,CAACG,QAAlB;AACAH,IAAAA,KAAK,CAACM,IAAN,GAAaN,KAAK,CAACG,QAAN,CAAeG,IAA5B;AACH,GAHD,MAGM,IAAGN,KAAK,CAACK,MAAN,KAAiB,GAApB,EAAwB;AAC1BzB,IAAAA,OAAO,CAACC,GAAR,CAAYmB,KAAZ;AACH,GAFK,MAED,CACD;AACH;;AACDA,EAAAA,KAAK,CAACA,KAAN,GAAc,IAAd;AACA,SAAOA,KAAP;AACH,CA3BL;AA8BAO,MAAM,CAACC,OAAP,GAAiB;AAAEvB,EAAAA,MAAF;AAAUN,EAAAA;AAAV,CAAjB","sourcesContent":["require('dotenv').config()\nconst axios = require('axios')\n\nconsole.log(process.env.REACT_APP_API_KEY)\nconst client = axios.create({\n    baseURL: `http://${process.env.URL_F1_API}`,\n    headers: {\n        'Authorization': `Bearer ${process.env.API_KEY}`\n    },\n    timeout: 20000\n})\n\nif (process.env.NODE_ENV !== 'production') {\n    require('axios-debug-log').addLogger(client)\n}\n\nclient.interceptors.request.use((config) => {\n    config.metadata = { startTime: new Date() }\n    return config\n}, (error) => {\n    return Promise.reject(error)\n})\n\n// Intercept all responses\nclient.interceptors.response.use(\n    (response) => {\n        console.log(response)\n        response.error = false\n        return response\n    },\n    (error) => {\n        if(error.code){\n           if(error.code === 'ECONNABORTED'){\n            error.status = 504\n            console.log(error)\n           }\n        }else{\n            console.log(error)\n            // error.status = error.response.status\n        }\n        \n        if (error.status === 500) {\n            console.log(error.response)\n            error.data = error.response.data\n        }else if(error.status === 504){\n            console.log(error)\n        }else{\n            //error.data = error.response.data\n        }\n        error.error = true\n        return error\n    }\n)\n\nmodule.exports = { client, axios }"]},"metadata":{},"sourceType":"module"}